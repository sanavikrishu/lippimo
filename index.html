<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lipimo - Home Page</title>
  <style>
    body {
      font-family: Garamond, serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #fffafc, #e0f7ff);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    h1 { margin: 30px 0; font-size: 36px; color: #444; text-align: center; }

    /* Profile circle and menu */
    .top-bar { display:flex; justify-content:flex-end; width: 100%; padding:10px 20px; background:#fefefe; box-shadow:0 1px 5px rgba(0,0,0,0.1); }
    .profile-container { position:relative; }
    .profile-circle { width:50px; height:50px; border-radius:50%; border:2px solid #ccc; object-fit:cover; cursor:pointer; transition:0.3s; }
    .profile-circle:hover { border-color:#888; }
    .profile-menu { position:absolute; top:60px; right:0; background:#fff; border:1px solid #ccc; border-radius:8px; padding:10px; width:180px; box-shadow:0 3px 10px rgba(0,0,0,0.1); text-align:center; display:none; }
    .profile-menu p { margin:5px 0; font-size:14px; word-break:break-all; }
    .profile-menu button { margin-top:5px; padding:5px 10px; border:none; background:#007bff; color:#fff; border-radius:4px; cursor:pointer; }
    .profile-menu button:hover { background:#0056b3; }

    /* Login/Logout buttons styling */
    .auth-buttons { margin: 10px; display:flex; gap:10px; }
    .auth-btn { background: linear-gradient(135deg, #c9a6ff, #a18aff); color:white; border:none; padding:10px 20px; border-radius:12px; cursor:pointer; font-size:16px; transition:0.2s; }
    .auth-btn:hover { transform: translateY(-2px); box-shadow:0 6px 12px rgba(0,0,0,0.2); }
  </style>
</head>
<body>

  <!-- Top bar -->
  <div class="top-bar">
    <div class="profile-container">
      <img id="profileImg" class="profile-circle" src="default-profile.png" alt="Profile Photo">
      <div id="profileMenu" class="profile-menu">
        <p id="userEmail">user@example.com</p>
        <button id="editProfileBtn">Edit Profile</button>
      </div>
    </div>
  </div>

  <!-- Login / Logout -->
  <div class="auth-buttons">
    <button id="loginBtn" class="auth-btn">Login</button>
    <button id="logoutBtn" class="auth-btn">Logout</button>
  </div>

  <!-- Example content -->
  <h1>Home Page of Lipimo</h1>

  <!-- Your existing buttons/grid content can go here -->

  <!-- Firebase scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.2.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.2.0/firebase-auth.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.2.0/firebase-storage.js";

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MSG_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const storage = getStorage();

    const profileImg = document.getElementById('profileImg');
    const profileMenu = document.getElementById('profileMenu');
    const userEmail = document.getElementById('userEmail');
    const editBtn = document.getElementById('editProfileBtn');
    const loginBtn = document.getElementById('loginBtn');
    const logoutBtn = document.getElementById('logoutBtn');

    // Show/hide profile menu
    profileImg.addEventListener('click', () => {
      profileMenu.style.display = profileMenu.style.display === 'none' ? 'block' : 'none';
    });
    document.addEventListener('click', e => {
      if (!e.target.closest('.profile-container')) profileMenu.style.display = 'none';
    });

    // Edit profile page
    editBtn.addEventListener('click', () => window.location.href = 'edit.html');

    // Login button
    loginBtn.addEventListener('click', async () => {
      const email = prompt("Enter your email:");
      const password = prompt("Enter your password:");
      if (!email || !password) return alert("Email and password required!");
      try {
        await signInWithEmailAndPassword(auth, email, password);
        alert("Logged in successfully!");
      } catch(err) { alert(err.message); }
    });

    // Logout button
    logoutBtn.addEventListener('click', async () => {
      try {
        await signOut(auth);
        alert("Logged out!");
        profileImg.src = "default-profile.png";
        userEmail.textContent = "user@example.com";
      } catch(err) { alert(err.message); }
    });

    // Load user info real-time
    onAuthStateChanged(auth, async user => {
      if (user) {
        userEmail.textContent = user.email;
        const storageRef = ref(storage, `profilePhotos/${user.uid}.jpg`);
        try {
          const url = await getDownloadURL(storageRef);
          profileImg.src = url;
        } catch { profileImg.src = "default-profile.png"; }
      } else {
        profileImg.src = "default-profile.png";
        userEmail.textContent = "user@example.com";
      }
    });

  </script>

</body>
</html>
